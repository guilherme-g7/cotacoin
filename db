
CREATE SEQUENCE acoes_acao_id_seq;

CREATE TABLE acoes (
                acao_id INTEGER NOT NULL DEFAULT nextval('acoes_acao_id_seq'),
                tipo VARCHAR NOT NULL,
                codigoIdent VARCHAR NOT NULL,
                fracionario VARCHAR NOT NULL,
                setor VARCHAR NOT NULL,
                CONSTRAINT acoes_id PRIMARY KEY (acao_id)
);


ALTER SEQUENCE acoes_acao_id_seq OWNED BY acoes.acao_id;

CREATE SEQUENCE usuario_usuario_id_seq;

CREATE TABLE usuario (
                usuario_id INTEGER NOT NULL DEFAULT nextval('usuario_usuario_id_seq'),
                nome VARCHAR NOT NULL,
                email VARCHAR NOT NULL,
                senha VARCHAR NOT NULL,
                CONSTRAINT usuario_id PRIMARY KEY (usuario_id)
);


ALTER SEQUENCE usuario_usuario_id_seq OWNED BY usuario.usuario_id;

CREATE SEQUENCE transacao_transacao_id_seq;

CREATE TABLE transacao (
                transacao_id VARCHAR NOT NULL DEFAULT nextval('transacao_transacao_id_seq'),
                usuario_id INTEGER NOT NULL,
                acao_id INTEGER NOT NULL,
                tipo VARCHAR NOT NULL,
                quantidade VARCHAR NOT NULL,
                cotacao NUMERIC(14,2) NOT NULL,
                CONSTRAINT transacao_id PRIMARY KEY (transacao_id)
);


ALTER SEQUENCE transacao_transacao_id_seq OWNED BY transacao.transacao_id;

CREATE SEQUENCE dividendo_id_seq;

CREATE TABLE dividendos (
                dividendo_id VARCHAR NOT NULL DEFAULT nextval('dividendo_id_seq'),
                valor NUMERIC(14,2) NOT NULL,
                dt_compra DATE NOT NULL,
                dt_pagto DATE NOT NULL,
                usuario_id INTEGER NOT NULL,
                acao_id INTEGER NOT NULL,
                CONSTRAINT dividendos_id_pk PRIMARY KEY (dividendo_id)
);


ALTER SEQUENCE dividendo_id_seq OWNED BY dividendos.dividendo_id;

ALTER TABLE dividendos ADD CONSTRAINT acoes_dividendos_fk
FOREIGN KEY (acao_id)
REFERENCES acoes (acao_id)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE transacao ADD CONSTRAINT acoes_transacao_fk
FOREIGN KEY (acao_id)
REFERENCES acoes (acao_id)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE dividendos ADD CONSTRAINT usuario_dividendos_fk
FOREIGN KEY (usuario_id)
REFERENCES usuario (usuario_id)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;

ALTER TABLE transacao ADD CONSTRAINT usuario_transacao_fk
FOREIGN KEY (usuario_id)
REFERENCES usuario (usuario_id)
ON DELETE NO ACTION
ON UPDATE NO ACTION
NOT DEFERRABLE;
